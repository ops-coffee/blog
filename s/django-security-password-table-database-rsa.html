<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="applicable-device" content="pc,mobile">
  <meta name="keywords" content="Django, å¢åˆ æ”¹æŸ¥, æ•°æ®åŠ å¯†, Python3, RSAåŠ å¯†, update_or_create, æ•°æ®åº“è¿ç»´" />
  <meta name="description" content="æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Djangoå®ç°å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼Œå¹¶è¯¦ç»†è®²è§£äº†å¦‚ä½•åœ¨Python3ä¸­ä½¿ç”¨RSAåŠ å¯†ç®—æ³•è¿›è¡Œæ•°æ®åŠ å¯†ï¼Œé€‚åˆåˆã€ä¸­çº§å¼€å‘è€…å­¦ä¹ ã€‚" />
  <link rel="alternate" type="application/rss+xml" title="è¿ç»´å’–å•¡å§" href="https://blog.ops-coffee.com/feed.xml" />
  <link rel="stylesheet" href="https://blog.ops-coffee.com/static/posts/css/ops-coffee.min.css" type="text/css" />

  <!-- Begin SEO tag -->
  <title>Djangoå¼€å‘å¯†ç ç®¡ç†è¡¨å®ä¾‹ã€é™„æºç ã€‘</title>
  <meta property="og:locale" content="zh_CN" />
  <meta property="og:site_name" content="è¿ç»´å’–å•¡å§" />
  <meta property="og:url" content="https://blog.ops-coffee.coms/django-security-password-table-database-rsa.html" />
  <meta property="og:title" content="Djangoå¼€å‘å¯†ç ç®¡ç†è¡¨å®ä¾‹ã€é™„æºç ã€‘" />
  <meta property="og:description" content="æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Djangoå®ç°å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼Œå¹¶è¯¦ç»†è®²è§£äº†å¦‚ä½•åœ¨Python3ä¸­ä½¿ç”¨RSAåŠ å¯†ç®—æ³•è¿›è¡Œæ•°æ®åŠ å¯†ï¼Œé€‚åˆåˆã€ä¸­çº§å¼€å‘è€…å­¦ä¹ ã€‚" />
  <link rel="canonical" href="https://blog.ops-coffee.coms/django-security-password-table-database-rsa.html" />

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Djangoå¼€å‘å¯†ç ç®¡ç†è¡¨å®ä¾‹ã€é™„æºç ã€‘",
    "description": "æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Djangoå®ç°å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼Œå¹¶è¯¦ç»†è®²è§£äº†å¦‚ä½•åœ¨Python3ä¸­ä½¿ç”¨RSAåŠ å¯†ç®—æ³•è¿›è¡Œæ•°æ®åŠ å¯†ï¼Œé€‚åˆåˆã€ä¸­çº§å¼€å‘è€…å­¦ä¹ ã€‚",
    "url": "https://blog.ops-coffee.coms/django-security-password-table-database-rsa.html",
    "author": {
      "@type": "Person",
      "name": "è¿ç»´å’–å•¡å§"
    },
    "publisher": {
      "@type": "Organization",
      "name": "è¿ç»´å’–å•¡å§",
      "logo": {
        "@type": "ImageObject",
        "url": "https://blog.ops-coffee.com/favicon.ico"
      }
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://blog.ops-coffee.coms/django-security-password-table-database-rsa.html"
    }
  }
  </script>
  <!-- End SEO tag -->
</head>

<body>
  <div class="top-nav">
    <input type="checkbox" id="menu-toggle" class="menu-toggle" />
    <label for="menu-toggle" class="menu-button">&#9776; 
        <span class="menu-title">è¿ç»´å’–å•¡å§</span>
    </label> 

    <div class="container">
      <nav class="header-site">
        <ul>
          <li><a href="/">é¦–é¡µ</a></li>
            <li class="has-submenu">
              <a href="#" target="_self">è¿ç»´</a>
              <ul class="sub-menu">
                <li><a href="/tag/ç³»ç»Ÿè¿ç»´/" target="_self">ç³»ç»Ÿè¿ç»´</a></li>
                <li><a href="/elk/index.html" target="_self">ELKç³»åˆ—</a></li>
                <li><a href="/ldap/index.html" target="_self">LDAPç³»åˆ—</a></li>
              </ul>
            </li>
            <li class="has-submenu">
              <a href="#" target="_self">å¼€å‘</a>
              <ul class="sub-menu">
                <li><a href="/tag/Devops/" target="_self">DevOps</a></li>
                <li><a href="/tag/Python/" target="_self">Python</a></li>
                <li><a href="/tag/Django/" target="_self">Django</a></li>
                <li><a href="/bpmn/index.html" target="_self">BPMNç³»åˆ—</a></li>
                <li><a href="/webssh/index.html" target="_self">WebSSHç³»åˆ—</a></li>
                <li><a href="/frontend/index.html" target="_self">å‰ç«¯å¼€å‘ç³»åˆ—</a></li>
              </ul>
            </li>
            <li><a href="/devops/index.html" target="_self">è¿ç»´å¹³å°</a></li>
            <li class="has-submenu">
              <a href="#" target="_self">è¿™æ˜¯ç”Ÿæ´»</a>
              <ul class="sub-menu">
                <li><a href="/life/chronicles.html" target="_self">æ—¶å…‰å°è®°</a></li>
                <li><a href="/life/money.html" target="_self">å‰¯ä¸šèµšé’±</a></li>
                <li><a href="/life/writing.html" target="_self">å†™ä½œç›¸å…³</a></li>
                <li><a href="/tag/è¿™æ˜¯ç”Ÿæ´»/" target="_self">ç”Ÿæ´»éšç¬”</a></li>
              </ul>
            </li>
            <li class="has-submenu">
              <a href="#" target="_self">æˆ¿è½¦æ—…è¡Œ</a>
              <ul class="sub-menu">
                <li><a href="/rv.html" target="_self">æˆ¿è½¦ä½“éªŒ</a></li>
                <li><a href="/travels.html" target="_self">æ—…è¡Œæ¸¸è®°</a></li>
                <li><a href="/travel/china.html" target="_self">æ—…è¡Œåœ°å›¾</a></li>
              </ul>
            </li>
            <li><a href="/tag/index.html" target="_self">æ ‡ç­¾</a></li>
            <li><a href="/archive.html" target="_self">å½’æ¡£</a></li>
          <li class="search"><a href="/search.html" target="_self" aria-label="æœç´¢">ğŸ”</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <header>
    <div class="container">
      <a href="/">
        <div class="name">è¿ç»´å’–å•¡å§</div>
        <div class="slogan">äº«å—æŠ€æœ¯å¸¦æ¥çš„ä¹è¶£ï¼Œä½“éªŒç”Ÿæ´»ç»™äºˆçš„æ„ŸåŠ¨</div>
      </a>
    </div>
  </header>

  <div id="content-wrap">
    <div class="container">
        <h1 id="art-title">Djangoå¼€å‘å¯†ç ç®¡ç†è¡¨å®ä¾‹ã€é™„æºç ã€‘</h1>

        <blockquote>
<p>æ–‡ç« åŠä»£ç æ¯”è¾ƒåŸºç¡€ï¼Œé€‚åˆåˆã€ä¸­çº§äººå‘˜ï¼Œé«˜æ‰‹ç•¥è¿‡</p>
</blockquote>
<p>é˜…è¯»æ­¤ç¯‡æ–‡ç« ä½ å¯ä»¥ï¼š</p>
<ul>
<li>è·å–ä¸€ä¸ªDjangoå®ç°å¢åˆ æ”¹æŸ¥çš„æ¡ˆä¾‹æºç </li>
<li>äº†è§£æ•°æ®åŠ å¯†çš„ä½¿ç”¨åœºæ™¯å’Œæ–¹æ³•ä»¥åŠå¦‚ä½•åœ¨Python3ä¸­ä½¿ç”¨</li>
</ul>
<h1 id="_1">èƒŒæ™¯ä»‹ç»</h1>
<p>DBAéœ€è¦ç»´æŠ¤ä¸€å¼ å¯†ç è¡¨ï¼Œä¸»è¦è®°å½•æ•°æ®åº“ä¸­åˆ›å»ºçš„è´¦å·å¯†ç ä¿¡æ¯ï¼Œå¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<p><img alt="" loading="lazy" src="/static/images/2018/1206.05.png" /></p>
<p>ç›®å‰çš„ç»´æŠ¤æ–¹å¼è¿˜æ˜¯æœ€ä¼ ç»Ÿçš„Excelï¼Œä¸€ä¸ªäººæ›´æ–°ç»™å¤šä¸ªäººåŒæ­¥ï¼ŒExcelè®¾ç½®å¯†ç ä»¥ä¿è¯å®‰å…¨æ€§ï¼ŒåŸå§‹ä¸”æ•ˆç‡ä½ä¸‹ï¼Œæ—¢ç„¶æˆ‘ä»¬å·²ç»ä¸Šçº¿äº†overmindæ•°æ®åº“è¿ç»´ç³»ç»Ÿï¼Œä½•ä¸åœ¨ç³»ç»Ÿé‡Œè¾¹é›†æˆè¿™ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ</p>
<h1 id="_2">æŠ€æœ¯å®ç°</h1>
<p>ç®€å•åˆ†æå°±å¯ä»¥çŸ¥é“ï¼Œæˆ‘ä»¬è¦å®ç°çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<p>1.æœ€åŸºç¡€çš„è¡¨å•å¢åˆ æ”¹æŸ¥</p>
<p>2.æ¶‰åŠåˆ°å¯†ç å­˜å‚¨éœ€è¦åŠ å¯†</p>
<h3 id="update_or_create">update_or_create</h3>
<p>è¡¨å•å¢åˆ æ”¹æŸ¥å¤§å®¶åº”è¯¥éƒ½æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œå®ç°æ–¹å¼æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬é‡‡ç”¨äº†æœ€ç®€å•çš„viewæ–¹æ³•æ¥å®ç°ï¼Œè¯¦ç»†å†…å®¹æŸ¥çœ‹æºä»£ç ã€‚</p>
<p>ä»£ç ä¸­ç”¨åˆ°äº†Djangoçš„ä¸€ä¸ªQuerySet APIå¯èƒ½éƒ¨åˆ†äººæ²¡æœ‰ç”¨è¿‡<code>update_or_create</code>ï¼Œè¿™é‡Œè¯¦ç»†ä»‹ç»ä¸‹</p>
<p><strong>update_or_create(defaults=None, **kwargs)</strong></p>
<p>çœ‹åˆ°æ–¹æ³•çš„å‘½åå¤§æ¦‚ä¹Ÿèƒ½çŒœå‡ºæ¥è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨å°±æ˜¯æ›´æ–°æˆ–è€…åˆ›å»ºmodelæ•°æ®ï¼Œé‚£ä¹ˆç©¶ç«Ÿä»€ä¹ˆæƒ…å†µä¸‹æ›´æ–°ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹åˆ›å»ºå‘¢ï¼Ÿä¸»è¦æ ¹æ®ä¼ å…¥çš„<code>**kwargs</code>æ¥åˆ¤æ–­ï¼Œ<code>defaults</code>ä¸ºè¦æ›´æ–°çš„æ•°æ®ã€‚ä¸€å¥è¯æ¦‚æ‹¬ä¸ºfilter kwargsï¼Œcreate/update defaults</p>
<p>ä¾‹å¦‚å¯¹äºä¸€å¼ ç”¨æˆ·è¡¨æˆ‘ä»¬è¦åˆ¤æ–­usernameä¸ºdevopsï¼Œä¸”emailä¸ºdevops@ops-coffee.comçš„ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºè¿™ä¸ªç”¨æˆ·ï¼Œä¸”è®¾ç½®ç”¨æˆ·çš„siteä¸ºhttps://ops-coffee.comï¼Œå¦‚æœå­˜åœ¨åˆ™æ›´æ–°è¿™ä¸ªç”¨æˆ·çš„siteä¸ºhttps://ops-coffee.com,åˆ™å¯ä»¥è¿™æ ·å†™</p>
<pre class="codehilite"><code>object, created = User.objects.update_or_create(
    username='devops',
    email='devops@ops-coffee.com',
    defaults={
        'username':'devops',
        'email':'devops@ops-coffee.com',
        'site':'https://ops-coffee.com'
    }
)</code></pre>


<p>é¢ï¼Œä¸Šè¾¹çš„ä¾‹å­æ˜¯ä¸æ˜¯æœ‰ç‚¹å¤æ‚äº†ï¼Œæ‹¿æˆ‘ä»¬é¡¹ç›®é‡Œè¾¹çš„å®ä¾‹ä¸ºä¾‹ï¼Œå°±æ˜¯åˆ¤æ–­idæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ›´æ–°ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</p>
<pre class="codehilite"><code>object, created = Table.objects.update_or_create(
    id=postdata.get('id'),
    defaults=postdata
)</code></pre>


<p>update_or_createæ–¹æ³•è¿”å›ç»“æœä¸ºä¸€ä¸ªå…ƒç»„(object, created)ï¼Œobjectä¸ºæ–°å»ºæˆ–è€…æ›´æ–°çš„å¯¹è±¡ï¼Œcreatedä¸ºä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯æ–°å»ºè¿˜æ˜¯æ›´æ–°ï¼ŒTrueä¸ºæ–°å»º</p>
<h3 id="_3">å¯†ç åŠ å¯†</h3>
<p>å¯¹äºå¯†ç åŠ å¯†ï¼Œæˆ‘ä»¬çŸ¥é“åŠ å¯†ç®—æ³•æœ‰å¾ˆå¤šï¼Œç©¶ç«Ÿå“ªç§é€‚åˆæˆ‘ä»¬å‘¢ï¼Ÿ</p>
<p>çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå­˜å‚¨çš„æ—¶å€™è¦åŠ å¯†å­˜å‚¨ï¼Œä½†ä¹Ÿè¦èƒ½å¯¹åŠ å¯†åçš„æ•°æ®è¿›è¡Œè§£å¯†ä»¥è·å–åŸå§‹å¯†ç ï¼Œé‚£ä¹ˆå°±è¦æ±‚åŠ å¯†ç®—æ³•æ—¢æ”¯æŒåŠ å¯†ï¼Œä¹Ÿæ”¯æŒè§£å¯†ï¼Œå¯¹äºmd5è¿™ç§åªæ”¯æŒåŠ å¯†çš„å•å‘ç®—æ³•å°±ä¸èƒ½é€‰æ‹©äº†ï¼Œåœ¨æ”¯æŒåŠ è§£å¯†çš„ç®—æ³•ä¸­åº”ç”¨æœ€ä¸ºå¹¿æ³›çš„å½“å±RSAäº†ï¼Œæˆ‘ä»¬æœ€ç»ˆä¹Ÿé€‰æ‹©äº†RSAï¼Œå…¶å®å•å•å¯¹äºè¿™ä¸ªåœºæ™¯æ¥è¯´ç”¨3DESä¹‹ç±»çš„å¯¹ç§°åŠ å¯†å°±å¤Ÿäº†ï¼Œé€Ÿåº¦ä¹Ÿä¼šå¿«å¾ˆå¤šï¼Œä½†æ˜¯è€ƒè™‘åˆ°ç³»ç»Ÿé‡Œè¾¹æœ‰å…¶ä»–çš„åŠ å¯†éœ€æ±‚é€‰æ‹©RSAèƒ½æ»¡è¶³æ›´å¤šæƒ…æ™¯ã€‚</p>
<p>RSAåŠ å¯†ç®—æ³•éå¸¸å¤æ‚ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥è¯¢ä¸“ä¸šèµ„æ–™ï¼ŒRSAéœ€è¦ä¸€å¯¹ç§˜é’¥ç§°ä¸ºå…¬é’¥å’Œç§é’¥ï¼Œå…¬é’¥å¯ä»¥å¯¹å­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯†ç”ŸæˆåŠ å¯†å­—ç¬¦ä¸²ï¼Œæ‹¿ç§é’¥å¯ä»¥å°†åŠ å¯†å­—ç¬¦ä¸²è¿˜åŸã€‚</p>
<h4 id="python3rsa">python3ä¸­RSAçš„ä½¿ç”¨</h4>
<p>ç”ŸæˆRSAç§˜é’¥å¯¹ä»£ç </p>
<pre class="codehilite"><code>from Cryptodome.PublicKey import RSA


def create_rsa_key():
    '''ç”ŸæˆRSAç§˜é’¥å¯¹'''
    try:
        # é€‰æ‹©ç§˜é’¥ä½æ•°ï¼Œä½æ•°è¶Šé«˜è¶Šå®‰å…¨ï¼ŒåŒæ—¶åŠ å¯†é€Ÿåº¦ä¹Ÿè¶Šæ…¢
        key = RSA.generate(2048)
        encrypted_key = key.exportKey(pkcs=8)

        public_key = key.publickey().exportKey().decode('utf-8')
        private_key = encrypted_key.decode('utf-8')

        return {'state': 1, 'message': {'public_key': public_key, 'private_key': private_key}}
    except Exception as err:
        return {'state': 0, 'message': str(err)}

if __name__ == '__main__':
    print(create_rsa_key())</code></pre>


<p>æ‰§è¡Œè„šæœ¬ç”ŸæˆRSAç§˜é’¥å¯¹ï¼Œå°†RSAç§˜é’¥å¯¹é…ç½®åœ¨åŠ è§£å¯†çš„ä»£ç ä¸­</p>
<p>RSAåŠ å¯†è§£å¯†ä»£ç </p>
<pre class="codehilite"><code>import binascii
from Cryptodome.PublicKey import RSA
from Cryptodome.Cipher import PKCS1_v1_5


class RsaCrypto():
    '''RSA åŠ è§£å¯†'''

    def __init__(self):
        self.private_key = '''-----BEGIN PRIVATE KEY-----
        MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDLetN9MfsVWZj2
        K+i1vPQqeDKb8Fe52pHKvRtQggTF+x3YRCyk7UNQ27VupohM8t+Qzi2Zm3GnZY5X
        H7W8UGLnI1X1ykpWOWVueP3KCA7DCtswDp5hkJgHzPPZC/DlFh0uCpAmUkgHP7WU
        XRZoR9mmcVOdWN9c+NWS0JA6cwHSI+J78Edb1lfef5YOwseL2GiOmBiJ7THYfjrw
        FwGQaZVjhsp3Pkt7Yt/Huc5NU234wA9j+TFFnubpOrE9mFT8qCkhFhWIEcNsuTqD
        DDI9BX0lLaEEn+vg9cnEZ97VgdQQG2D6Ozw4Gldpfoq1XB6BqXg+YsCvyD/h/4QD
        LpejZy/VAgMBAAECggEADJkoj6omNevb459Tri+VHS1fUiEEXXZ3QQqKWWa4wu/0
        U2030mek8P8EHGYP2avOmcRE4IDWUvCfv9cvxQljxj8oKwABBZZSKGUyBBiRnr6E
        /v8OC/5hhgIeNZm0ADW+osN2qgNoKu1lNwVjG3EaEbXB4TkdGJWI1lPhdNelYjby
        7/4vnXO7yplSFlDLiqjmEV9Vva3Jf3N3vf92ZfUJg6NHklYDlP+L4unNtS++HKtv
        C3TWSz0esVrK67t4Vut+RdKrSQzzWkPAqNwktUavQq6Nb+KMrf9tsQujPZaXkEUn
        LUwtVNwhT3BiyPswHN1ycjlP3lN391rnawDQc751dQKBgQDZSFBq1JaGm4zK2YHm
        BbxCJ++6l1Qmu9yhk/zic1M/oGoFRdzkeWrYsxhLupp+4PjcCPEiZqivSeJXsFVO
        diSjWsBkfO51HRuEzRE2Z/tiTRzJsGAcrBsWwBYNZR/PADG7MEYhIYH0p6Jp3jrq
        pNs0f5Gz8XToPi2TQXmRyAltFwKBgQDvvOFlJFfx1ld2wLuZ0w1yMpUoyFYCWSh+
        ylREFETod8ufbQxRzvvSA3gFO+xwYZoA+Wq/TyGrfVnN9m4R1goPsQjsuUYQeAIi
        MBKmG5znTAmu8dQ5wLKtb10CV0MuFGOSv8xvlccKepY7IDtxOaO410o4PFEjAziU
        90b8RiRV8wKBgHDsUD71NTXH6agS2pu9J1YKg2Cp/SYURFoFG0xlO0K6D9+lq2Ni
        ZtEwYtQYqup96VgRnaCPUeOntmZ0UiFw7SGorIyNETD0a7TdDrED4XX5NZjsfUbp
        ezqbodpcT+e45h+uuwPE8lFAPfxfbqc7/mCOXB70whlhFzaMtK27FIsJAoGAVtTJ
        qnF8bPpeWYO7Lx7TOu55Ofk9tcIHOc0csj/JKY3iMY80rBjU+p8JBJRMsfOX7Qxp
        jnshzdQsB75e5ZTptf9AJUWBzAs7cpiI2KMdtGTFCRlL7dMOpGS2gleK3JDD8+4G
        JNBR9EisSyQEg6EF3LgViMLH/G95OfNKQatCE+MCgYEAhRIuEMaL2idD9NKOVdgC
        fuSbiP5G69IBVD4uoDYFPQJjxqVOg3pORa8+cJTe+ZFaCkTGV3112eM5Vtm4Vd9Q
        pOh7VgJP1l3puZnUoSWGoWansx6aKok5FwuUrZWPjqr/Zrre8XXJyaiR520tuf0i
        StMfNAsijJgi2pq2PTMovhE=
        -----END PRIVATE KEY-----'''

        self.public_key = '''-----BEGIN PUBLIC KEY-----
        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAy3rTfTH7FVmY9ivotbz0
        Kngym/BXudqRyr0bUIIExfsd2EQspO1DUNu1bqaITPLfkM4tmZtxp2WOVx+1vFBi
        5yNV9cpKVjllbnj9yggOwwrbMA6eYZCYB8zz2Qvw5RYdLgqQJlJIBz+1lF0WaEfZ
        pnFTnVjfXPjVktCQOnMB0iPie/BHW9ZX3n+WDsLHi9hojpgYie0x2H468BcBkGmV
        Y4bKdz5Le2Lfx7nOTVNt+MAPY/kxRZ7m6TqxPZhU/KgpIRYViBHDbLk6gwwyPQV9
        JS2hBJ/r4PXJxGfe1YHUEBtg+js8OBpXaX6KtVwegal4PmLAr8g/4f+EAy6Xo2cv
        1QIDAQAB
        -----END PUBLIC KEY-----'''

    def encrypt(self, plaintext):
        '''åŠ å¯†æ–¹æ³•'''
        try:
            recipient_key = RSA.import_key(self.public_key)
            cipher_rsa = PKCS1_v1_5.new(recipient_key)

            en_data = cipher_rsa.encrypt(plaintext.encode('utf-8'))
            hex_data = binascii.hexlify(en_data).decode('utf-8')

            return {'state': 1, 'message': hex_data}
        except Exception as err:
            return {'state': 0, 'message': str(err)}

    def decrypt(self, hex_data):
        '''è§£å¯†æ–¹æ³•'''
        try:
            private_key = RSA.import_key(self.private_key)
            cipher_rsa = PKCS1_v1_5.new(private_key)

            en_data = binascii.unhexlify(hex_data.encode('utf-8'))
            data = cipher_rsa.decrypt(en_data, None).decode('utf-8')

            return {'state': 1, 'message': data}
        except Exception as err:
            return {'state': 0, 'message': str(err)}


if __name__ == '__main__':
    print(RsaCrypto().encrypt())</code></pre>


<p>å¯¹åŸå§‹å¯†ç åŠ å¯†</p>
<pre class="codehilite"><code>&gt;&gt;&gt; _t = RsaCrypto().encrypt('ops_coffee.cn')
&gt;&gt;&gt; print(_t)
{'state': 1, 'message': 'ae3e52eede23a7c9dd348244f0ae90b06c6773e9fecb2383f8195c50e6032742fb793423d75082db9a325b091d3e02351cd04157c68a64a5c130c0eaf7de1396d8993f0d649d1f3c1004119aa221daefca52215a235fb316af313ef64479957264012be20a1d54987386a3f29ae2fe80e147e7eeb770803045cab0d979aa6d5b88c39058f8fba7f6bf06bc436be59a19ccb72ac2813d809132203a64020bbe3c0c3df74befa8b18fb4782e34daff8f6e33e4b45cbe1b2db2be2c3e38a1c9e0e314178ed36a53960017fd9af5f27d99c5e5e0a8d384ac83156598788334248507ac1498fe44b1fb7e3b43e44a8bf3fc189076b16efef2c0f0a86d7faa0
53bbe24'}</code></pre>


<p>è·å–åŠ å¯†åçš„å­—ç¬¦ä¸²</p>
<pre class="codehilite"><code>&gt;&gt;&gt; hex_data = _t.get('message')
&gt;&gt;&gt; print(hex_data)
ae3e52eede23a7c9dd348244f0ae90b06c6773e9fecb2383f8195c50e6032742fb793423d75082db9a325b091d3e02351cd04157c68a64a5c130c0eaf7de1396d8993f0d649d1f3c1004119aa221daefca52215a235fb316af313ef64479957264012be20a1d54987386a3f29ae2fe80e147e7eeb770803045cab0d979aa6d5b88c39058f8fba7f6bf06bc436be59a19ccb72ac2813d809132203a64020bbe3c0c3df74befa8b18fb4782e34daff8f6e33e4b45cbe1b2db2be2c3e38a1c9e0e314178ed36a53960017fd9af5f27d99c5e5e0a8d384ac83156598788334248507ac1498fe44b1fb7e3b43e44a8bf3fc189076b16efef2c0f0a86d7faa053bbe24</code></pre>


<p>å¯¹åŠ å¯†åçš„å­—ç¬¦ä¸²è¿›è¡Œè§£å¯†</p>
<pre class="codehilite"><code>&gt;&gt;&gt; _x = RsaCrypto().decrypt(hex_data)
&gt;&gt;&gt; print(_x)
{'state': 1, 'message': 'ops_coffee.cn'}</code></pre>


<h1 id="_4">é¡µé¢å±•ç¤º</h1>
<p>åˆ—è¡¨é¡µï¼šåˆ—è¡¨é¡µä½¿ç”¨äº†datatablesæ’ä»¶æ–¹ä¾¿å±•ç¤ºï¼Œä¸”ä½¿ç”¨äº†Djangoçš„æ¨¡æ¿å¼•æ“ç›´æ¥æ¸²æŸ“</p>
<p><img alt="" loading="lazy" src="/static/images/2018/1206.01.png" /></p>
<p>æ·»åŠ ï¼šä¸€ä¸ªç®€å•çš„åŠŸèƒ½ï¼Œè¿™é‡Œå°±åœ¨å½“å‰é¡µé¢å¼¹å‡ºmodelå¼¹å‡ºæ¡†çš„æ–¹å¼æ¥å±•ç°</p>
<p><img alt="" loading="lazy" src="/static/images/2018/1206.02.png" /></p>
<p>ç¼–è¾‘ï¼šæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤éƒ½é‡‡ç”¨å‰åç«¯åˆ†ç¦»ï¼Œajaxå¼‚æ­¥jsonæ•°æ®äº¤äº’</p>
<p><img alt="" loading="lazy" src="/static/images/2018/1206.03.png" /></p>
<p>æŸ¥çœ‹åŸå§‹å¯†ç ï¼šå®é™…ä¸Šæ˜¯æœ‰æƒé™ç®¡ç†çš„ï¼Œå¹¶éæ‰€æœ‰ç”¨æˆ·éƒ½èƒ½æŸ¥çœ‹åŸå§‹å¯†ç </p>
<p><img alt="" loading="lazy" src="/static/images/2018/1206.04.png" /></p>
<h1 id="_5">æºç åœ°å€</h1>
<p>https://github.com/ops-coffee/demo/tree/master/password</p>
<hr />
<p>åœ¨ç»è¿‡Nä¹…ä¹‹åå†å›è¿‡å¤´æ¥çœ‹è‡ªå·±å†™çš„ä»£ç ï¼Œä¸å®Œç¾æœ‰æå‡é‚£æ˜¯å¿…ç„¶çš„ï¼Œæ‰€ä»¥ä¾¿æœ‰äº†è¿™ç¯‡æ–‡ç« ï¼š<a href="https://blog.ops-coffee.com/s/django-password-management-encryption-decryption.html" target="_blank">Django Modelå­—æ®µåŠ å¯†çš„ä¼˜é›…å®ç°</a>ï¼Œæ¢è®¨äº†ä¸€ç§å­—æ®µåŠ å¯†æ›´ä¼˜é›…çš„æ–¹å¼</p>

        <div>
          <ul class="article-meta">
            <li><a href="/s/django-security-password-table-database-rsa.html">ğŸ“… 2018-12-06</a></li>
<li><a href="/tag/Django/">ğŸ·ï¸ Django</a></li><li><a href="/tag/å…³äºæŠ€æœ¯/">ğŸ·ï¸ å…³äºæŠ€æœ¯</a></li>          </ul>
        </div>

        <hr>

        <div class="pagination">
            <a href="https://blog.ops-coffee.com/s/django-aggregate-annotate-echarts-bar-chart.html" class="pagination-item prev-page">
                <span class="pagination-arrow">â†</span>
                <span class="pagination-text">ä¸Šä¸€ç¯‡ï¼š<br>Django+Echartsç”»å›¾å®ä¾‹</span>
            </a>
            <a href="https://blog.ops-coffee.com/s/svn-hooks-introduction-and-application.html" class="pagination-item next-page">
                <span class="pagination-text">ä¸‹ä¸€ç¯‡ï¼š<br>SVN Hooksçš„ä»‹ç»åŠä½¿ç”¨</span>
                <span class="pagination-arrow">â†’</span>
            </a>
        </div>

        <div>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8944257246828217"
         data-ad-slot="6731434232" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>

<div class="nav-cell">
    <script async src="https://giscus.app/client.js"
            data-repo="ops-coffee/blog" data-repo-id="MDEwOlJlcG9zaXRvcnkxNDY4OTI0MTg="
            data-category="Announcements" data-category-id="DIC_kwDOCMFmgs4CQar3"
            data-mapping="pathname" data-strict="0" data-reactions-enabled="1"
            data-emit-metadata="0" data-input-position="top" data-theme="light"
            data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous">
    </script>
</div>

        <div class="nav-cell">
    <p class="nav-list-title">èƒ½çœ‹åˆ°è¿™é‡Œä¸€å®šæ˜¯çœŸçˆ±ï¼Œè®¢é˜…ä¸€ä¸‹å§</p>
    <img alt="" loading="lazy" src="/static/images/wx.sou1.png" />
</div>

    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="copy"> Â© ops-coffee</div>

      <div class="link">
        <a href="/comments.html" title="ç»™æˆ‘ç•™è¨€" target="_blank">ç•™è¨€</a>
        <a href="/friends.html" title="å‹æƒ…é“¾æ¥" target="_blank">å‹é“¾</a>
      </div>
    </div>
  </footer>
  
  <!-- Umami -->
<script defer src="https://umami.ops-coffee.cn/script.js" data-website-id="248e61f0-c324-444e-a56d-bf97ee44a8fc"></script>

<!-- Google Adsense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8944257246828217" crossorigin="anonymous"></script>
</body>
</html>