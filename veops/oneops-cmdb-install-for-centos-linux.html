<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="applicable-device" content="pc,mobile">
  <meta name="keywords" content="VECMDBéƒ¨ç½², Docker Compose, MySQL, Redis, CMDBç³»ç»Ÿ, CMDB API, CMDB UI, Dockerå®‰è£…, CentOS7, å®¹å™¨åŒ–éƒ¨ç½², è‡ªå®šä¹‰ç½‘ç»œ, æœ¬åœ°å·, ç¯å¢ƒå˜é‡, æ’é”™æ–¹æ³•" />
  <meta name="description" content="æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†VECMDBçš„éƒ¨ç½²è¿‡ç¨‹ï¼ŒåŒ…æ‹¬Dockerå’ŒDocker Composeçš„å®‰è£…ã€é¡¹ç›®å¯åŠ¨ã€è®¿é—®æ–¹å¼ä»¥åŠç³»ç»Ÿç®¡ç†ã€‚æ­¤å¤–ï¼Œè¿˜æä¾›äº†è¯¦ç»†çš„æ’é”™æ–¹æ³•å’Œå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©è¯»è€…æ·±å…¥äº†è§£VECMDBçš„è¿è¡Œæœºåˆ¶ã€‚" />
  <link rel="alternate" type="application/rss+xml" title="è¿ç»´å’–å•¡å§" href="https://blog.ops-coffee.cn/feed.xml" />
  <link rel="stylesheet" href="https://blog.ops-coffee.cn/static/posts/css/ops-coffee.min.css" type="text/css" />

  <!-- Begin SEO tag -->
  <title>å¼€æºï½œç»´æ˜“CMDBè¯¦è§£ä¹‹å®‰è£…éƒ¨ç½²åŠå¸¸è§é—®é¢˜å¤„ç†</title>
  <meta property="og:locale" content="zh_CN" />
  <meta property="og:site_name" content="è¿ç»´å’–å•¡å§" />
  <meta property="og:url" content="https://blog.ops-coffee.cn" />
  <meta property="og:title" content="å¼€æºï½œç»´æ˜“CMDBè¯¦è§£ä¹‹å®‰è£…éƒ¨ç½²åŠå¸¸è§é—®é¢˜å¤„ç†" />
  <meta property="og:description" content="æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†VECMDBçš„éƒ¨ç½²è¿‡ç¨‹ï¼ŒåŒ…æ‹¬Dockerå’ŒDocker Composeçš„å®‰è£…ã€é¡¹ç›®å¯åŠ¨ã€è®¿é—®æ–¹å¼ä»¥åŠç³»ç»Ÿç®¡ç†ã€‚æ­¤å¤–ï¼Œè¿˜æä¾›äº†è¯¦ç»†çš„æ’é”™æ–¹æ³•å’Œå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©è¯»è€…æ·±å…¥äº†è§£VECMDBçš„è¿è¡Œæœºåˆ¶ã€‚" />
  <link rel="canonical" href="https://blog.ops-coffee.cn" />
  <!-- End SEO tag -->
</head>

<body>
  <div class="header">
    <div class="menu-button">&#9776; 
        <span class="menu-title">è¿ç»´å’–å•¡å§</span>
    </div> 

    <div class="container no-sidebar">
      <nav class="header-site">
        <ul>
          <li><a href="/">é¦–é¡µ</a></li>
            <li class="has-submenu">
              <a href="#" target="_self">è¿ç»´</a>
              <ul class="sub-menu">
                <li><a href="/tag/ç³»ç»Ÿè¿ç»´/" target="_self">ç³»ç»Ÿè¿ç»´</a></li>
                <li><a href="/elk/index.html" target="_self">ELKç³»åˆ—</a></li>
                <li><a href="/ldap/index.html" target="_self">LDAPç³»åˆ—</a></li>
              </ul>
            </li>
            <li class="has-submenu">
              <a href="#" target="_self">å¼€å‘</a>
              <ul class="sub-menu">
                <li><a href="/tag/Devops/" target="_self">DevOps</a></li>
                <li><a href="/tag/Python/" target="_self">Python</a></li>
                <li><a href="/tag/Django/" target="_self">Django</a></li>
                <li><a href="/bpmn/index.html" target="_self">BPMNç³»åˆ—</a></li>
                <li><a href="/webssh/index.html" target="_self">WebSSHç³»åˆ—</a></li>
                <li><a href="/frontend/index.html" target="_self">å‰ç«¯å¼€å‘ç³»åˆ—</a></li>
              </ul>
            </li>
            <li><a href="/devops/index.html" target="_self">è¿ç»´å¹³å°</a></li>
            <li class="has-submenu">
              <a href="#" target="_self">è¿™æ˜¯ç”Ÿæ´»</a>
              <ul class="sub-menu">
                <li><a href="/life/chronicles.html" target="_self">æ—¶å…‰å°è®°</a></li>
                <li><a href="/life/money.html" target="_self">å‰¯ä¸šèµšé’±</a></li>
                <li><a href="/life/writing.html" target="_self">å†™ä½œç›¸å…³</a></li>
                <li><a href="/tag/è¿™æ˜¯ç”Ÿæ´»/" target="_self">ç”Ÿæ´»éšç¬”</a></li>
              </ul>
            </li>
            <li class="has-submenu">
              <a href="#" target="_self">æˆ¿è½¦æ—…è¡Œ</a>
              <ul class="sub-menu">
                <li><a href="/rv.html" target="_self">æˆ¿è½¦ä½“éªŒ</a></li>
                <li><a href="/travels.html" target="_self">æ—…è¡Œæ¸¸è®°</a></li>
                <li><a href="/travel/china.html" target="_self">æ—…è¡Œåœ°å›¾</a></li>
              </ul>
            </li>
            <li><a href="/tag/index.html" target="_self">æ ‡ç­¾</a></li>
            <li><a href="/archive.html" target="_self">å½’æ¡£</a></li>
          <li class="search"><a href="/search.html" target="_self">ğŸ”</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <header>
    <div class="container no-sidebar">
      <a href="/">
        <div class="name">è¿ç»´å’–å•¡å§</div>
        <div class="slogan">äº«å—æŠ€æœ¯å¸¦æ¥çš„ä¹è¶£ï¼Œä½“éªŒç”Ÿæ´»ç»™äºˆçš„æ„ŸåŠ¨</div>
      </a>
    </div>
  </header>

  <div id="content-wrap">
    <div class="container no-sidebar">
        <h1 id="art-title">å¼€æºï½œç»´æ˜“CMDBè¯¦è§£ä¹‹å®‰è£…éƒ¨ç½²åŠå¸¸è§é—®é¢˜å¤„ç†</h1>

        <p>ä¹‹å‰ä»‹ç»è¿‡ä¸€ä¸ª<a href="https://blog.ops-coffee.cn/s/veops-open-source-cmdb-devops" target="_blank">çµæ´»å¤šå˜åŠŸèƒ½å¼ºå¤§çš„å¼€æºCMDBç³»ç»Ÿ</a>ï¼Œè®¾è®¡ç²¾å·§ï¼Œå¯ç©æ€§é«˜ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„æ·±åº¦ä½¿ç”¨ï¼Œå‘ç°äº†è®¸å¤šå¯å–ä¹‹å¤„ï¼Œæ— è®ºæ˜¯æ„å»ºç³»ç»Ÿå†…éƒ¨çš„èµ„äº§ç®¡ç†æ•°æ®åº“ï¼Œè¿˜æ˜¯å­¦ä¹ å®ƒçš„è®¾è®¡æ–¹å¼éƒ½æœ‰ä¸å°‘çš„å¯å–ä¹‹å¤„ï¼Œæ¥ä¸‹æ¥æˆ‘å‡†å¤‡å†™ä¸€ç³»åˆ—çš„æ–‡ç« æ¥ç³»ç»Ÿçš„ä»‹ç»ä¸€ä¸‹å®ƒï¼Œä»ä½¿ç”¨åˆ°è®¾è®¡ï¼Œå…¨é¢æ·±å…¥äº†è§£ä¸‹</p>
<p>è¿™ä¸ªç³»åˆ—ç¬¬ä¸€ç¯‡å°±ä»éƒ¨ç½²å¼€å§‹ï¼Œè¯¦ç»†ä»‹ç»ä¸‹VECMDBçš„å®‰è£…ã€å¯åŠ¨ã€è®¿é—®ä»¥åŠç³»ç»Ÿçš„è¯¦ç»†ç®¡ç†æ–¹å¼å’Œå¸¸è§é”™è¯¯çš„å¤„ç†ç­‰</p>
<h2 id="_1">å®‰è£…</h2>
<p>åœ¨å¼€å§‹ä¹‹å‰ä½ åªéœ€è¦å‡†å¤‡ä¸€å°ä¸»æœºï¼ŒLinuxæˆ–MacOSç³»ç»Ÿï¼Œåªè¦èƒ½å®‰è£…dockerå³å¯ã€‚ä»¥ä¸‹æ“ä½œç¯å¢ƒåŸºäºCentOS7</p>
<h3 id="docker">å®‰è£…Docker</h3>
<p>1.æ›´æ–°ç³»ç»ŸåŒ…</p>
<pre class="codehilite"><code>yum update -y</code></pre>


<p>2.å®‰è£…å¿…è¦çš„ä¾èµ–</p>
<pre class="codehilite"><code>yum install -y yum-utils</code></pre>


<p>3.æ·»åŠ  Docker çš„å®˜æ–¹å­˜å‚¨åº“</p>
<pre class="codehilite"><code>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</code></pre>


<p>4.å®‰è£… Docker å¼•æ“</p>
<pre class="codehilite"><code>yum install -y docker-ce docker-ce-cli containerd.io</code></pre>


<p>5.å¯åŠ¨ Docker å¹¶å°†å…¶è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨</p>
<pre class="codehilite"><code>systemctl start docker
systemctl enable docker</code></pre>


<h3 id="docker-compose-v2">å®‰è£… Docker Compose v2</h3>
<p>1.å®‰è£… Docker Compose æ’ä»¶</p>
<pre class="codehilite"><code>yum install -y docker-compose-plugin</code></pre>


<p>2.éªŒè¯ Docker Compose æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<pre class="codehilite"><code>docker compose version</code></pre>


<h3 id="git">å®‰è£…GIT</h3>
<pre class="codehilite"><code>yum install git</code></pre>


<h2 id="_2">å¯åŠ¨</h2>
<p>1.åˆ›å»ºé¡¹ç›®ç›®å½•</p>
<pre class="codehilite"><code>mkdir /data
cd /data</code></pre>


<p>2.æ‹‰é¡¹ç›®ä»£ç å¹¶å¯åŠ¨</p>
<pre class="codehilite"><code>git clone https://github.com/veops/cmdb.git
cd cmdb/
docker compose up -d</code></pre>


<h2 id="_3">è®¿é—®</h2>
<p>æµè§ˆå™¨æ‰“å¼€ï¼Œè¾“å…¥<code>http://ip:8000</code>è®¿é—®ï¼Œé»˜è®¤è´¦å·å¯†ç åˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li>Userï¼šadmin</li>
<li>Passwordï¼š123456</li>
</ul>
<h2 id="_4">è¯¦è§£</h2>
<p>é€šè¿‡ä»¥ä¸Šå†…å®¹å¯ä»¥ç®€å•æ–¹ä¾¿çš„éƒ¨ç½²èµ·æ¥VECMDBæœåŠ¡ï¼Œä½†æˆ‘ä»¬ä¸ä»…è¦çŸ¥å…¶ç„¶è¿˜è¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œä»¥ä¸‹è¿™éƒ¨åˆ†å°†ä¼šè¯¦ç»†çš„è®²è§£ä¸‹CMDBçš„å¯åŠ¨æ–¹å¼åŠå„ä¸ªæœåŠ¡ï¼Œä»¥åŠä¸€äº›ç®€å•çš„æ’é”™æ–¹æ³•ï¼Œèƒ½æ›´æ·±å…¥çš„äº†è§£VECMDBæœåŠ¡</p>
<h3 id="docker-compose">Docker Compose</h3>
<p>Docker-Composeæ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡ä¸€ä¸ªåä¸º<code>docker-compose.yml</code>çš„YAMLæ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥é…ç½®åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰æœåŠ¡ã€‚ç„¶åï¼Œåªéœ€ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥åˆ›å»ºå¹¶å¯åŠ¨è¿™äº›æœåŠ¡ã€‚VECMDBæ˜¯é€šè¿‡Docker-ComposeåšæœåŠ¡ç®¡ç†çš„ï¼Œé‚£é¦–å…ˆæˆ‘ä»¬å°±éœ€è¦è¯¦ç»†çš„äº†è§£ä¸‹VECMDBçš„<code>docker-compose.yml</code>é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ä½äºä»“åº“çš„æ ¹ç›®å½•ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre class="codehilite"><code>services: # ç¬¬ä¸€éƒ¨åˆ†ä¸ºæœåŠ¡å®šä¹‰
  cmdb-db: # å®šä¹‰äº†ä¸€ä¸ªåä¸ºcmdb-dbçš„æœåŠ¡
    image: registry.cn-hangzhou.aliyuncs.com/veops/cmdb-db:2.3 # é•œåƒåœ°å€ï¼ŒMySQLæ•°æ®åº“å®¹å™¨
    container_name: cmdb-db  # å®¹å™¨åç§°ä¸ºcmdb-db
    env_file: # ä»å½“å‰ç›®å½•ä¸‹çš„.envæ–‡ä»¶ä¸­åŠ è½½ç¯å¢ƒå˜é‡
      - .env
    environment: # ç¯å¢ƒå˜é‡é…ç½®
      TZ: Asia/Shanghai # é…ç½®æ—¶åŒºä¸ºAsia/Shanghai
    volumes: # æŒ‚è½½ä¸‰ä¸ªå·
      - db-data:/var/lib/mysql # ç¬¬ä¸€ä¸ªå·ä¸ºdb-dataï¼Œç”¨æ¥æŒä¹…åŒ–MySQLæ•°æ®
      - ./docs/mysqld.cnf:/etc/mysql/conf.d/mysqld.cnf # æœ¬åœ°é…ç½®æ–‡ä»¶mysqld.cnfæŒ‚è½½åˆ°MySQLé…ç½®ç›®å½•
      - ./docs/cmdb.sql:/docker-entrypoint-initdb.d/cmdb.sql # åˆå§‹åŒ–SQLæ–‡ä»¶cmdb.sqlæŒ‚è½½åˆ°MySQLå®¹å™¨çš„åˆå§‹åŒ–ç›®å½•
    healthcheck: # å¥åº·å‘½ä»¤æ£€æŸ¥ï¼Œæ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦æ­£å¸¸
      test: [&quot;CMD&quot;, &quot;mysqladmin&quot; ,&quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot;, &quot;-p$MYSQL_ROOT_PASSWORD&quot;] # å¥åº·æ£€æŸ¥å‘½ä»¤ï¼Œæ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦æ­£å¸¸
      interval: 10s
      timeout: 5s
      retries: 5
    command: --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci # è®¾ç½®MySQLå­—ç¬¦é›†å’Œæ’åºè§„åˆ™
    networks: # ç½‘ç»œé…ç½®ï¼Œä½¿ç”¨åå­—ä¸ºnewçš„è‡ªå®šä¹‰ç½‘ç»œï¼ŒåŒæ—¶è®¾ç½®åˆ«åä¸ºmysql
      new:
        aliases:
          - mysql
    ports: # ç«¯å£é…ç½®ï¼Œå°†å®¿ä¸»æœºçš„23306ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„3306ç«¯å£
      - '23306:3306'

  cmdb-cache: # å®šä¹‰ä¸€ä¸ªåä¸ºcmdb-cacheçš„æœåŠ¡
    image: registry.cn-hangzhou.aliyuncs.com/veops/cmdb-cache:2.3 # é•œåƒåœ°å€ï¼ŒRedisç¼“å­˜å®¹å™¨
    container_name: cmdb-cache # å®¹å™¨åç§°ä¸ºcmdb-cache
    environment: # ç¯å¢ƒå˜é‡é…ç½®
      TZ: Asia/Shanghai # é…ç½®æ—¶åŒºä¸ºAsia/Shanghai
    volumes: # æŒ‚è½½ä¸€ä¸ªå·
      - cache-data:/data # å·ä¸ºcache-dataï¼Œç”¨æ¥æŒä¹…åŒ–Redisæ•°æ®
    healthcheck: # å¥åº·æ£€æŸ¥å‘½ä»¤ï¼Œæ£€æŸ¥RedisæœåŠ¡æ˜¯å¦æ­£å¸¸
      test: [&quot;CMD&quot;, &quot;redis-cli&quot;, &quot;ping&quot;]
      interval: 10s
      timeout: 5s
      retries: 5
    networks: # ç½‘ç»œé…ç½®ï¼Œä½¿ç”¨åå­—ä¸ºnewçš„è‡ªå®šä¹‰ç½‘ç»œï¼ŒåŒæ—¶è®¾ç½®åˆ«åä¸ºredis
      new:
        aliases:
          - redis

  cmdb-api: # å®šä¹‰ä¸€ä¸ªåä¸ºcmdb-apiçš„æœåŠ¡
    image: registry.cn-hangzhou.aliyuncs.com/veops/cmdb-api:2.4.5 # é•œåƒåœ°å€ï¼ŒCMDB APIå®¹å™¨
    container_name: cmdb-api # å®¹å™¨åç§°ä¸ºcmdb-api
    env_file: # ä»å½“å‰ç›®å½•ä¸‹çš„.envæ–‡ä»¶ä¸­åŠ è½½ç¯å¢ƒå˜é‡
      - .env
    environment: # ç¯å¢ƒå˜é‡é…ç½®
      TZ: Asia/Shanghai # é…ç½®æ—¶åŒºä¸ºAsia/Shanghai
      WAIT_HOSTS: cmdb-db:3306, cmdb-cache:6379 # é…ç½®WAIT_HOSTSç”¨æ¥ç­‰å¾…cmdb-dbå’Œcmdb-cacheæœåŠ¡å¥åº·åå†å¯åŠ¨
    depends_on: # å®šä¹‰ä¾èµ–å…³ç³»
      cmdb-db: # ç¡®ä¿cmdb-dbæœåŠ¡å¯åŠ¨å¥åº·åå†å¯åŠ¨
        condition: service_healthy
      cmdb-cache: # ç¡®ä¿cmdb-cacheæœåŠ¡å¯åŠ¨å¥åº·åå†å¯åŠ¨
        condition: service_healthy
    command: # å¤šè¡Œå¯åŠ¨å‘½ä»¤
      - /bin/sh
      - -c
      - |
        sed -i &quot;s#USE_ACL = False#USE_ACL = True#g&quot; settings.py # ä¿®æ”¹settings.pyä¸­çš„USE_ACLä¸ºTrue
        /wait # ä½¿ç”¨/waitè„šæœ¬ç­‰å¾…æœåŠ¡ä¾èµ–å¯åŠ¨
        flask db-setup # åˆå§‹åŒ–æ•°æ®åº“
        flask common-check-new-columns # æ£€æŸ¥æ•°æ®åº“æ–°åˆ—
        gunicorn --workers=4 autoapp:app -b 0.0.0.0:5000 -D # å¯åŠ¨gunicornæœåŠ¡

        celery -A celery_worker.celery worker -E -Q one_cmdb_async --autoscale=4,1 --logfile=one_cmdb_async.log -D # å¯åŠ¨celeryæœåŠ¡ï¼Œé˜Ÿåˆ—one_cmdb_async
        celery -A celery_worker.celery worker -E -Q acl_async --logfile=one_acl_async.log --autoscale=2,1 -D # å¯åŠ¨celeryæœåŠ¡ï¼Œé˜Ÿåˆ—acl_async

        nohup flask cmdb-trigger &gt; trigger.log 2&gt;&amp;1 &amp;
        flask cmdb-init-cache
        flask cmdb-init-acl
        flask init-import-user-from-acl
        flask init-department
        flask cmdb-counter &gt; counter.log 2&gt;&amp;1 # æ‰§è¡Œä¸€ç³»åˆ—çš„flashå‘½ä»¤ç”¨æ¥åˆå§‹åŒ–ç³»ç»Ÿ
    healthcheck: # å¥åº·æ£€æŸ¥å‘½ä»¤ï¼Œæ£€æŸ¥APIæœåŠ¡æ˜¯å¦å¯åŠ¨æ­£å¸¸
      timeout: 3s
      interval: 5s
      retries: 10
      test: &quot;ps aux|grep -v grep|grep -v '1 root'|grep gunicorn || exit 1&quot;        
    networks: # ç½‘ç»œé…ç½®ï¼Œä½¿ç”¨åå­—ä¸ºnewçš„è‡ªå®šä¹‰ç½‘ç»œï¼ŒåŒæ—¶è®¾ç½®åˆ«åä¸ºcmdb-api
      new:
        aliases:
          - cmdb-api

  cmdb-ui: # å®šä¹‰ä¸€ä¸ªåä¸ºcmdb-uiçš„æœåŠ¡
    image: registry.cn-hangzhou.aliyuncs.com/veops/cmdb-ui:2.4.5 # é•œåƒåœ°å€ï¼ŒCMDB UIå®¹å™¨
    container_name: cmdb-ui # å®¹å™¨åç§°ä¸ºcmdb-api
    depends_on: # å®šä¹‰ä¾èµ–å…³ç³»
      - cmdb-api # ç¡®ä¿cmdb-apiæœåŠ¡å¯åŠ¨æˆåŠŸåå†å¯åŠ¨
        condition: service_healthy
    environment: # ç¯å¢ƒå˜é‡é…ç½®
      TZ: Asia/Shanghai # é…ç½®æ—¶åŒºä¸ºAsia/Shanghai
      CMDB_API_HOST: cmdb-api:5000 # CMDB_API_HOSTæŒ‡å‘åˆ°cmdb-apiæœåŠ¡çš„åœ°å€
      NGINX_PORT: 80 # è®¾ç½®NGINXçš„ç«¯å£ä¸º80
    volumes: # æŒ‚è½½ä¸€ä¸ªå·
      - ./docs/nginx.cmdb.conf.example:/etc/nginx/conf.d/nginx.cmdb.conf.example # æŒ‚è½½æœ¬åœ°çš„nginxé…ç½®æ–‡ä»¶
    command: # å¤šè¡Œå¯åŠ¨å‘½ä»¤
      - /bin/sh
      - -c
      - |
        envsubst '$$CMDB_API_HOST  $$NGINX_PORT' &lt; /etc/nginx/conf.d/nginx.cmdb.conf.example &gt; /etc/nginx/conf.d/cmdb.conf # ä½¿ç”¨envsubstæ›¿æ¢nginxé…ç½®æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡
        nginx -g  'daemon off;' # å¯åŠ¨nginxï¼Œä½¿ç”¨daemon offæ¨¡å¼ï¼Œå‰å°è¿è¡Œ
    networks: # ç½‘ç»œé…ç½®ï¼Œä½¿ç”¨åå­—ä¸ºnewçš„è‡ªå®šä¹‰ç½‘ç»œ
      - new
    ports: # ç«¯å£é…ç½®ï¼Œå°†å®¿ä¸»æœºçš„8000ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„80ç«¯å£
      - &quot;8000:80&quot;

volumes: # ç¬¬äºŒéƒ¨åˆ†ä¸ºå·å®šä¹‰
  db-data: # å®šä¹‰ä¸€ä¸ªdb-dataæœ¬åœ°å·ï¼Œç”¨æ¥æŒä¹…åŒ–MySQLæ•°æ®ï¼Œcmdb-dbå®¹å™¨ä½¿ç”¨
    driver: local
    name: cmdb_db-data
  cache-data: # å®šä¸€ä¸ªcache-dataæœ¬åœ°å·ï¼Œç”¨æ¥æŒä¹…åŒ–Redisæ•°æ®ï¼Œcmdb-cacheå®¹å™¨ä½¿ç”¨
    driver: local
    name: cmdb_cache-data

networks: # ç¬¬ä¸‰éƒ¨åˆ†ä¸ºç½‘ç»œå®šä¹‰
  new: # å®šä¹‰ä¸€ä¸ªnewæ¡¥æ¥ç½‘ç»œï¼Œç”¨äºå„æœåŠ¡ä¹‹é—´é€šä¿¡
    driver: bridge
    name: cmdb_network</code></pre>


<p>æ€»ç»“ä»¥ä¸‹å°±æ˜¯å¯åŠ¨äº†å››ä¸ªå®¹å™¨ï¼Œåˆ†åˆ«æ˜¯MySQLã€Reidsã€åç«¯APIå’Œå‰ç«¯UIï¼Œåç«¯APIå¯åŠ¨å‰éœ€è¦MySQLå’ŒReidså¯åŠ¨æˆåŠŸï¼Œè€Œå‰ç«¯UIå¯åŠ¨å‰éœ€è¦åç«¯APIå¯åŠ¨æˆåŠŸã€‚å®šä¹‰äº†ä¸€ä¸ªå…¬å…±çš„ç½‘ç»œä¿è¯å››ä¸ªå®¹å™¨ä¹‹é—´å¯ä»¥äº’ç›¸é€šä¿¡ï¼ŒåŒæ—¶è¿˜å®šä¹‰äº†ä¸¤ä¸ªæœ¬åœ°å·ï¼Œä¿è¯MySQLå’ŒReidsæ•°æ®çš„æŒä¹…åŒ–ï¼Œä»¥ç¡®ä¿å®¹å™¨åœ¨é‡å¯ä¹‹åæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œå¯¹ç³»ç»Ÿå‡çº§ä¹Ÿååˆ†å‹å¥½</p>
<h3 id="_5">æœ¬åœ°å·</h3>
<p>æ•°æ®æ˜¯æŒä¹…åŒ–åœ¨å®¿ä¸»æœºä¸Šçš„æœ¬åœ°å·é‡Œï¼Œæœ¬åœ°å·çš„æŸ¥çœ‹å¯ä»¥ç›´æ¥æ‰§è¡Œ<code>volume</code>å‘½ä»¤ï¼Œä¾‹å¦‚æŸ¥çœ‹MySQLçš„æœ¬åœ°å·ï¼Œå°±å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<pre class="codehilite"><code># docker volume inspect cmdb_db-data
[
    {
        &quot;CreatedAt&quot;: &quot;2024-06-03T17:59:36+08:00&quot;,
        &quot;Driver&quot;: &quot;local&quot;,
        &quot;Labels&quot;: {
            &quot;com.docker.compose.project&quot;: &quot;cmdb&quot;,
            &quot;com.docker.compose.version&quot;: &quot;2.27.0&quot;,
            &quot;com.docker.compose.volume&quot;: &quot;db-data&quot;
        },
        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/cmdb_db-data/_data&quot;,
        &quot;Name&quot;: &quot;cmdb_db-data&quot;,
        &quot;Options&quot;: null,
        &quot;Scope&quot;: &quot;local&quot;
    }
]</code></pre>


<p>å…¶ä¸­<code>Mountpoint</code>å°±æ˜¯æ•°æ®åœ¨å®¿ä¸»æœºæœ¬åœ°çš„æŒ‚è½½ç‚¹ï¼Œå¯ä»¥ç›´æ¥æŸ¥çœ‹å…¶ä¸­çš„æ•°æ®</p>
<pre class="codehilite"><code># ls /var/lib/docker/volumes/cmdb_db-data/_data/
auto.cnf  ca-key.pem  ca.pem  client-cert.pem  client-key.pem  cmdb  ib_buffer_pool  ib_logfile0  ib_logfile1  ibdata1  ibtmp1  mysql  performance_schema  private_key.pem  public_key.pem  server-cert.pem  server-key.pem  sys</code></pre>


<p>è€ŒRedisæŒä¹…åŒ–åœ¨æœ¬åœ°çš„æ•°æ®ä¹ŸåŒæ ·å¯ä»¥é€šè¿‡ä»¥ä¸Šçš„æ–¹æ³•æŸ¥çœ‹</p>
<pre class="codehilite"><code># docker volume inspect cmdb_cache-data
[
    {
        &quot;CreatedAt&quot;: &quot;2024-06-03T17:59:36+08:00&quot;,
        &quot;Driver&quot;: &quot;local&quot;,
        &quot;Labels&quot;: {
            &quot;com.docker.compose.project&quot;: &quot;cmdb&quot;,
            &quot;com.docker.compose.version&quot;: &quot;2.27.0&quot;,
            &quot;com.docker.compose.volume&quot;: &quot;cache-data&quot;
        },
        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/cmdb_cache-data/_data&quot;,
        &quot;Name&quot;: &quot;cmdb_cache-data&quot;,
        &quot;Options&quot;: null,
        &quot;Scope&quot;: &quot;local&quot;
    }
]
#
# ls /var/lib/docker/volumes/cmdb_cache-data/_data/
dump.rdb</code></pre>


<p>åªæœ‰ä¸€ä¸ªrdbæ•°æ®æ–‡ä»¶ã€‚å¦‚æœä½ åœ¨éƒ¨ç½²æ—¶é‡åˆ°æ•°æ®æ–¹é¢çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸Šæ–¹æ³•æ¥æŸ¥çœ‹æœ¬åœ°çš„æ•°æ®ï¼Œæˆ–æ˜¯ç›´æ¥å‘½ä»¤è¡Œè¿›å…¥MySQLæˆ–è€…Reidså»æ£€æŸ¥æ•°æ®ï¼Œå½“ç„¶æ›´å¤šçš„æ—¶å€™å¯èƒ½æ˜¯æ•°æ®åˆå§‹åŒ–é—®é¢˜ï¼Œæ‰€ä»¥æ›´ä¸ºæœ‰æ•ˆçš„æ–¹æ³•æˆ–è®¸æ˜¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤é‡å¯docker-composeæœåŠ¡</p>
<pre class="codehilite"><code># å…³é—­docker composeæœåŠ¡
# docker compose down

# å¯åŠ¨docker composeæœåŠ¡
# docker compose up -d

# å¯é€‰ï¼šæŸ¥çœ‹docker composeæœåŠ¡çŠ¶æ€
# docker compose ps

# å¯é€‰ï¼šæ£€æŸ¥docker composeå®¹å™¨æ—¥å¿—
# docker compose logs</code></pre>


<h3 id="_6">è‡ªå®šä¹‰ç½‘ç»œ</h3>
<p>docker-composeæœåŠ¡å¯åŠ¨åï¼Œå¯ä»¥é€šè¿‡<code>network</code>å‘½ä»¤æŸ¥çœ‹Dockerçš„ç½‘ç»œåˆ—è¡¨</p>
<pre class="codehilite"><code># docker network ls
NETWORK ID     NAME           DRIVER    SCOPE
17ec43fa34f8   bridge         bridge    local
5dd2f0dd8033   cmdb_network   bridge    local
75376eee7d8b   host           host      local
deb75486f151   none           null      local</code></pre>


<p>æ­¤æ—¶èƒ½çœ‹åˆ°ä¸€ä¸ªåä¸º<code>cmdb_network</code>çš„ç½‘ç»œï¼Œå¦‚æœä½ é‡åˆ°äº†ç½‘ç»œè¿é€šæ€§é—®é¢˜ï¼Œä¾‹å¦‚APIè¿ä¸ä¸Šæ•°æ®åº“ç­‰ç­‰ï¼Œå¯ä»¥é€šè¿‡<code>network</code>å‘½ä»¤æŸ¥çœ‹ç½‘ç»œçš„è¯¦ç»†ä¿¡æ¯</p>
<pre class="codehilite"><code># docker network inspect cmdb_network
[
    {
        &quot;Name&quot;: &quot;cmdb_network&quot;,
        &quot;Id&quot;: &quot;5dd2f0dd8033f7c99d4a8e5371356b41e087c71eb9f35c4fdacaccdfa280e3d1&quot;,
        &quot;Created&quot;: &quot;2024-06-12T13:42:35.923873631+08:00&quot;,
        &quot;Scope&quot;: &quot;local&quot;,
        &quot;Driver&quot;: &quot;bridge&quot;,
        &quot;EnableIPv6&quot;: false,
        &quot;IPAM&quot;: {
            &quot;Driver&quot;: &quot;default&quot;,
            &quot;Options&quot;: null,
            &quot;Config&quot;: [
                {
                    &quot;Subnet&quot;: &quot;172.19.0.0/16&quot;,
                    &quot;Gateway&quot;: &quot;172.19.0.1&quot;
                }
            ]
        },
        &quot;Internal&quot;: false,
        &quot;Attachable&quot;: false,
        &quot;Ingress&quot;: false,
        &quot;ConfigFrom&quot;: {
            &quot;Network&quot;: &quot;&quot;
        },
        &quot;ConfigOnly&quot;: false,
        &quot;Containers&quot;: {
            &quot;176d8a248ecde36d46205e03ff19879cd2a6c6325e3e8622ca48033ae55a0e5b&quot;: {
                &quot;Name&quot;: &quot;cmdb-api&quot;,
                &quot;EndpointID&quot;: &quot;0619481c0a6241b445ea6daead002c39f82aae56ba77390b67d73779d56c7221&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:13:00:04&quot;,
                &quot;IPv4Address&quot;: &quot;172.19.0.4/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;3387071f980e26a399350f8a6fda0587edccb25319ec040945896228671616c4&quot;: {
                &quot;Name&quot;: &quot;cmdb-db&quot;,
                &quot;EndpointID&quot;: &quot;234d64c1858fb5933defe84b13aaf071426324959f0331abec4e1dd29c4c1a09&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:13:00:03&quot;,
                &quot;IPv4Address&quot;: &quot;172.19.0.3/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;a2df35da575fa289b4b2cc3dd0d7370c1003a47fe84b894a41751adef4d56dd4&quot;: {
                &quot;Name&quot;: &quot;cmdb-ui&quot;,
                &quot;EndpointID&quot;: &quot;a403699251326f92e391b4aa38f9d80cf14153053e4f2307d133b4ff9f167182&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:13:00:05&quot;,
                &quot;IPv4Address&quot;: &quot;172.19.0.5/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;aaf5d23ee24bd9719f9231369649fceac7a1fe8bb1bb9421ca12f35c3faade49&quot;: {
                &quot;Name&quot;: &quot;cmdb-cache&quot;,
                &quot;EndpointID&quot;: &quot;efe4eff06148e463a8b9a1af0ef15e81701e0bec39f9cfa25fb9613005b32148&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:13:00:02&quot;,
                &quot;IPv4Address&quot;: &quot;172.19.0.2/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            }
        },
        &quot;Options&quot;: {},
        &quot;Labels&quot;: {
            &quot;com.docker.compose.network&quot;: &quot;new&quot;,
            &quot;com.docker.compose.project&quot;: &quot;cmdb&quot;,
            &quot;com.docker.compose.version&quot;: &quot;2.27.0&quot;
        }
    }
]</code></pre>


<p>è¿™é‡Œè¾“å‡ºäº†ç½‘ç»œçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç½‘ç»œçš„é…ç½®ã€è¿æ¥åˆ°è¯¥ç½‘ç»œåˆ°å®¹å™¨ç­‰ç­‰ï¼Œå…¶ä¸­çš„<code>Containers</code>å­—æ®µå°±è®°å½•äº†æ‰€æœ‰è¿æ¥åˆ°æ­¤ç½‘ç»œåˆ°å®¹å™¨ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¼šæœ‰å››ä¸ªï¼ŒåŒ…å«<code>cmdb-db</code>ã€<code>cmdb-cache</code>ã€<code>cmdb-api</code>å’Œ<code>cmdb-ui</code>ï¼Œå®ƒä»¬éƒ½è¢«åˆ†é…äº†åˆé€‚çš„IPåœ°å€</p>
<h3 id="_7">å®¹å™¨</h3>
<p>å¦‚æœä»¥ä¸Šéƒ½æ²¡æœ‰é—®é¢˜ï¼Œé‚£å°±å¯ä»¥é€šè¿‡dockerå‘½ä»¤æŸ¥çœ‹åˆ°å®¹å™¨çš„çŠ¶æ€éƒ½æ­£å¸¸</p>
<pre class="codehilite"><code># docker compose ps
NAME         IMAGE                                                    COMMAND                  SERVICE      CREATED          STATUS                    PORTS
cmdb-api     registry.cn-hangzhou.aliyuncs.com/veops/cmdb-api:2.4.5   &quot;/bin/sh -c 'sed -i â€¦&quot;   cmdb-api     10 minutes ago   Up 10 minutes             
cmdb-cache   registry.cn-hangzhou.aliyuncs.com/veops/cmdb-cache:2.3   &quot;docker-entrypoint.sâ€¦&quot;   cmdb-cache   10 minutes ago   Up 10 minutes (healthy)   6379/tcp
cmdb-db      registry.cn-hangzhou.aliyuncs.com/veops/cmdb-db:2.3      &quot;docker-entrypoint.sâ€¦&quot;   cmdb-db      10 minutes ago   Up 10 minutes (healthy)   33060/tcp, 0.0.0.0:23306-&gt;3306/tcp, :::23306-&gt;3306/tcp
cmdb-ui      registry.cn-hangzhou.aliyuncs.com/veops/cmdb-ui:2.4.5    &quot;/docker-entrypoint.â€¦&quot;   cmdb-ui      10 minutes ago   Up 10 minutes             0.0.0.0:8000-&gt;80/tcp, :::8000-&gt;80/tcp</code></pre>


<p>æœ€åå°±å¯ä»¥æ­£å¸¸é€šè¿‡Webè®¿é—®éƒ¨ç½²çš„CMDBæœåŠ¡äº†</p>
<h2 id="_8">æ³¨æ„äº‹é¡¹</h2>
<p>å‰æ–‡çš„<code>docker-compose.yml</code>é…ç½®æ–‡ä»¶ä¸­æœ‰é…ç½®ä»ä»£ç æ ¹ç›®å½•ä¸‹åŠ è½½<code>.env</code>æ–‡ä»¶å†…å®¹ä½œä¸ºç¯å¢ƒå˜é‡ï¼Œ<code>.env</code>æ–‡ä»¶ä¸»è¦è®°å½•äº†MySQLæ•°æ®åº“é…ç½®ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p>
<pre class="codehilite"><code> MYSQL_ROOT_PASSWORD='123456'
 MYSQL_HOST='mysql'
 MYSQL_PORT=3306
 MYSQL_USER='cmdb'
 MYSQL_DATABASE='cmdb'
 MYSQL_PASSWORD='123456'</code></pre>


<p>å¯ä»¥çœ‹åˆ°é»˜è®¤çš„è´¦å·å¯†ç æ¯”è¾ƒç®€å•ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä¿®æ”¹çš„è¯ï¼Œæœ€å¥½åœ¨ç¬¬ä¸€æ¬¡åˆå§‹åŒ–ä¹‹å‰å°±ä¿®æ”¹<code>.env</code>æ–‡ä»¶é‡Œçš„é…ç½®ï¼Œè¿™æ ·çš„è¯åœ¨ç³»ç»Ÿåˆå§‹åŒ–æ—¶å°±ä¼šè®¾ç½®æˆæ–°è®¾ç½®çš„è´¦å·å¯†ç ï¼Œä»¥æé«˜ç³»ç»Ÿå®‰å…¨æ€§</p>
<p>è‹¥ä½ å·²ç»åˆå§‹åŒ–äº†ç³»ç»Ÿï¼Œè¿˜æƒ³è¦å†ä¿®æ”¹è´¦å·å¯†ç çš„è¯ï¼Œé‚£å°±åªèƒ½è¿›å…¥MySQLæ•°æ®åº“è¿›è¡Œä¿®æ”¹äº†ï¼ŒåŒæ—¶ä¿®æ”¹è¿‡ä¹‹åä¹Ÿè¦åŒæ—¶ä¿®æ”¹<code>.env</code>é…ç½®æ–‡ä»¶é‡Œçš„ç›¸å…³é…ç½®</p>
<h2 id="_9">å¸¸è§é—®é¢˜</h2>
<h3 id="_10">æ•°æ®åº“è¿æ¥å¤±è´¥</h3>
<p>æ•°æ®åº“çš„é…ç½®è®°å½•åœ¨<code>.env</code>é…ç½®æ–‡ä»¶ä¸­ï¼Œå…ˆæ£€æŸ¥æ•°æ®åº“é…ç½®å’Œç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®ï¼Œå…¶æ¬¡ç¡®è®¤æ•°æ®åº“æœåŠ¡æ­£å¸¸å¯åŠ¨å¹¶èƒ½æ¥å—è¿æ¥</p>
<pre class="codehilite"><code># docker exec -it cmdb-db mysql -u root -p$MYSQL_ROOT_PASSWORD</code></pre>


<p>æœ€åæ£€æŸ¥è‡ªå®šä¹‰ç½‘ç»œæ˜¯å¦æ­£å¸¸ï¼Œé€šè¿‡ä¹‹å‰ç»™çš„<code>network</code>å‘½ä»¤</p>
<h3 id="_11">ç¼“å­˜è¿æ¥å¤±è´¥</h3>
<p>æ£€æŸ¥RedisæœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œå¹¶èƒ½æ¥å—è¿æ¥</p>
<pre class="codehilite"><code># docker exec -it cmdb-cache redis-cli ping</code></pre>


<p>å…¶æ¬¡ä¹Ÿæ˜¯æ£€æŸ¥è‡ªå®šä¹‰ç½‘ç»œçŠ¶æ€</p>
<h3 id="api">APIæœåŠ¡å¯åŠ¨å¤±è´¥</h3>
<p>å…ˆæ£€æŸ¥ä»¥æ¥çš„MySQLå’ŒReidsæœåŠ¡æ˜¯å¦æ­£å¸¸ï¼Œç„¶åæ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸è¿é€šMySQLå’ŒRedis</p>
<pre class="codehilite"><code># docker exec -it cmdb-api /bin/sh -c &quot;ping cmdb-db&quot;
# docker exec -it cmdb-api /bin/sh -c &quot;ping cmdb-cache&quot;</code></pre>


<p>å¦‚æœæ­£å¸¸åˆ™æ£€æŸ¥APIæœåŠ¡å®¹å™¨çŠ¶æ€</p>
<pre class="codehilite"><code># docker compose ps | grep cmdb-api</code></pre>


<p>å®¹å™¨çŠ¶æ€æ­£å¸¸åˆ™æ£€æŸ¥gunicornæœåŠ¡æ˜¯å¦æ­£å¸¸</p>
<pre class="codehilite"><code># docker exec -it cmdb-api /bin/sh -c &quot;ps aux|grep -v grep|grep -v '1 root'|grep gunicorn&quot;</code></pre>


<p>æœ€åæŸ¥çœ‹æ—¥å¿—æ˜¯å¦æœ‰æŠ¥é”™</p>
<pre class="codehilite"><code># docker compose logs cmdb-api</code></pre>


<h3 id="ui">UIæœåŠ¡æ— æ³•è®¿é—®</h3>
<p>å…ˆç¡®è®¤ä¾èµ–çš„APIå®¹å™¨çŠ¶æ€æ­£å¸¸ï¼Œç„¶åæ£€æŸ¥ä¾èµ–çš„APIæœåŠ¡æ—¥å¿—æ— æŠ¥é”™ï¼Œå†ç„¶åæ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸è¿é€šAPIå®¹å™¨</p>
<pre class="codehilite"><code># docker exec -it cmdb-ui /bin/sh -c &quot;ping cmdb-api&quot;</code></pre>


<p>å¦‚æœéƒ½æ²¡æœ‰é—®é¢˜ï¼Œåˆ™æŸ¥çœ‹UIæœåŠ¡å®¹å™¨çŠ¶æ€</p>
<pre class="codehilite"><code># docker compose ps | grep cmdb-ui</code></pre>


<p>æœ€åæŸ¥çœ‹nginxé…ç½®åŠå®¹å™¨æ—¥å¿—æ˜¯å¦æœ‰æŠ¥é”™</p>
<pre class="codehilite"><code># docker exec -it cmdb-ui /bin/sh -c &quot;cd /etc/init.d &amp;&amp; nginx -t&quot;
# docker compose logs cmdb-ui</code></pre>


<p>å¯¹äºæˆç†Ÿçš„å¼€æºé¡¹ç›®ï¼Œåªè¦ä¸æ˜¯åˆšåˆšæ›´æ–°çš„æ–°ç‰ˆæœ¬ï¼Œé‚£å¤§æ¦‚ç‡éƒ½å·²ç»ç»è¿‡äº†è®¸å¤šç”¨æˆ·çš„å®é™…éªŒè¯ï¼Œé¡¹ç›®æœ¬èº«å‡ºç°é—®é¢˜çš„æ¦‚ç‡è¾ƒä½ï¼Œå¦‚æœæˆ‘ä»¬é‡åˆ°é”™è¯¯å…ˆè€ƒè™‘è‡ªå·±çš„ç¯å¢ƒåŠé…ç½®ï¼ŒæŒ‰ç…§ä»¥ä¸Šè§£å†³æ€è·¯ï¼Œå¤§æ¦‚ç‡èƒ½æ‰¾åˆ°é—®é¢˜å¹¶è§£å†³ã€‚å¦‚æœä¸è¡Œçš„è¯é‚£å°±é‡å¯ä¸‹docker-composeæœåŠ¡ï¼Œè¿˜ä¸è¡Œçš„è¯å°±é‡è£…å§</p>

        <div>
          <ul style="display: inline-block;padding: 0;margin: 0 0 0.5em;color: #999;">
            <li style="display: inline-block;margin: 0 1em 0 0;"><a href="/veops/oneops-cmdb-install-for-centos-linux.html">ğŸ“… 2024-06-04</a></li>
          </ul>
        </div>

        <hr>

        <div class="pagination">
            <a href="/archive.html" class="pagination-item prev-page">
                <span class="pagination-arrow">â†</span>
                <span class="pagination-text">ä¸Šä¸€ç¯‡ï¼š<br>æ–‡ç« åˆ—è¡¨</span>
            </a>
            <a href="https://blog.ops-coffee.cn/veops/oneops-cmdb-ci-types-configure-base.html" class="pagination-item next-page">
                <span class="pagination-text">ä¸‹ä¸€ç¯‡ï¼š<br>å¼€æºï½œç»´æ˜“CMDBè¯¦è§£ä¹‹æ¨¡å‹åŸºç¡€é…ç½®</span>
                <span class="pagination-arrow">â†’</span>
            </a>
        </div>

        <div class="nav-cell">
    <script async src="https://giscus.app/client.js"
            data-repo="ops-coffee/blog" data-repo-id="MDEwOlJlcG9zaXRvcnkxNDY4OTI0MTg="
            data-category="Announcements" data-category-id="DIC_kwDOCMFmgs4CQar3"
            data-mapping="pathname" data-strict="0" data-reactions-enabled="1"
            data-emit-metadata="0" data-input-position="top" data-theme="light"
            data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous">
    </script>
</div>

        <div>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8944257246828217"
         data-ad-slot="6731434232" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>

        <div class="nav-cell">
            <p class="nav-list-title">èƒ½çœ‹åˆ°è¿™é‡Œä¸€å®šæ˜¯çœŸçˆ±ï¼Œè®¢é˜…ä¸€ä¸‹å§</p>
            <img alt="" loading="lazy" src="/static/images/wx.sou1.png" />
        </div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="copy"> Â© ops-coffee</div>

      <div class="link">
        <a href="/comments.html" title="ç»™æˆ‘ç•™è¨€" target="_blank">ç•™è¨€</a>
        <a href="/friends.html" title="å‹æƒ…é“¾æ¥" target="_blank">å‹é“¾</a>
      </div>
    </div>
  </footer>
  
  <!-- Umami Cloud -->
<script async src="https://umami.ops-coffee.cn/script.js" data-website-id="a4aabd8e-32c7-40e7-a81c-119b909f2d0f"></script>

<!-- Google Adsense -->
<script data-ad-client="ca-pub-8944257246828217" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</body>

</html>